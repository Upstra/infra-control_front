{"openapi":"3.0.0","paths":{"/permission/vm":{"post":{"operationId":"PermissionVmController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PermissionVmDto"}}}},"responses":{"201":{"description":"Permission créée."}},"summary":"Créer une permission VM","tags":["Permission - VM"]}},"/permission/vm/{id}":{"put":{"operationId":"PermissionVmController_update","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PermissionVmDto"}}}},"responses":{"200":{"description":"Permission mise à jour."}},"summary":"Mettre à jour une permission VM","tags":["Permission - VM"]}},"/permission/vm/by-ids":{"get":{"operationId":"PermissionVmController_getByIds","parameters":[{"name":"ids","required":true,"in":"query","description":"Liste des IDs","schema":{"type":"array","items":{"type":"string"}}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PermissionVmDto"}}}},"responses":{"200":{"description":"Permissions récupérées."}},"summary":"Récupérer des permissions VM par IDs","tags":["Permission - VM"]}},"/permission/vm/by-role/{role}":{"get":{"operationId":"PermissionVmController_getByRole","parameters":[{"name":"role","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Permissions trouvées pour le rôle donné."}},"summary":"Récupérer les permissions VM par rôle","tags":["Permission - VM"]}},"/permissions/server/role/{roleId}":{"get":{"operationId":"PermissionServerController_getPermissionsByRole","parameters":[{"name":"roleId","required":true,"in":"path","schema":{"format":"uuid","type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PermissionServerDto"}}}}}},"summary":"Lister les permissions d’un rôle sur tous les serveurs","tags":["Permissions - Serveur"]}},"/permissions/server/{serverId}/role/{roleId}":{"get":{"operationId":"PermissionServerController_getPermissionByIds","parameters":[{"name":"serverId","required":true,"in":"path","schema":{"format":"uuid","type":"string"}},{"name":"roleId","required":true,"in":"path","schema":{"format":"uuid","type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PermissionServerDto"}}}}},"summary":"Récupérer une permission par rôle + serveur","tags":["Permissions - Serveur"]},"patch":{"operationId":"PermissionServerController_updatePermission","parameters":[{"name":"serverId","required":true,"in":"path","schema":{"format":"uuid","type":"string"}},{"name":"roleId","required":true,"in":"path","schema":{"format":"uuid","type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PermissionServerDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PermissionServerDto"}}}}},"summary":"Modifier une permission serveur existante","tags":["Permissions - Serveur"]},"delete":{"operationId":"PermissionServerController_deletePermission","parameters":[{"name":"serverId","required":true,"in":"path","schema":{"format":"uuid","type":"string"}},{"name":"roleId","required":true,"in":"path","schema":{"format":"uuid","type":"string"}}],"responses":{"204":{"description":"Permission supprimée avec succès"}},"summary":"Supprimer une permission serveur","tags":["Permissions - Serveur"]}},"/permissions/server":{"post":{"operationId":"PermissionServerController_createPermission","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PermissionServerDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PermissionServerDto"}}}}},"summary":"Créer une nouvelle permission serveur","tags":["Permissions - Serveur"]}},"/permissions/server/user/me":{"get":{"operationId":"PermissionServerController_getUserPermissionsMe","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PermissionServerDto"}}}}}},"security":[{"bearer":[]}],"summary":"Récupérer les permissions d’un utilisateur","tags":["Permissions - Serveur"]}},"/permissions/server/user/{userId}":{"get":{"operationId":"PermissionServerController_getUserPermissions","parameters":[{"name":"userId","required":true,"in":"path","schema":{"format":"uuid","type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PermissionServerDto"}}}}}},"summary":"Récupérer les permissions d’un utilisateur","tags":["Permissions - Serveur"]}},"/user/me":{"get":{"description":"Renvoie les informations du profil utilisateur connecté via le JWT.","operationId":"UserController_getMe","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Récupérer son propre profil utilisateur","tags":["User"]}},"/user":{"get":{"operationId":"UserController_getUsers","parameters":[{"name":"limit","required":false,"in":"query","schema":{"type":"number"}},{"name":"page","required":false,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserListResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Récupérer la liste paginée des utilisateurs","tags":["User"]}},"/user/count":{"get":{"operationId":"UserController_getUserCount","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"number"}}}}},"security":[{"bearer":[]}],"summary":"Nombre total d'utilisateurs","tags":["User"]}},"/user/{id}":{"get":{"description":"Renvoie les informations de l'utilisateur par son UUID.","operationId":"UserController_getUserById","parameters":[{"name":"id","required":true,"in":"path","description":"UUID de l'utilisateur à récupérer","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Récupérer un utilisateur par son ID","tags":["User"]},"delete":{"description":"Supprime un utilisateur via son UUID. Action irréversible.","operationId":"UserController_deleteUser","parameters":[{"name":"id","required":true,"in":"path","description":"UUID de l'utilisateur à supprimer","schema":{"type":"string"}}],"responses":{"204":{"description":"Utilisateur supprimé avec succès"}},"security":[{"bearer":[]}],"summary":"Supprimer un utilisateur","tags":["User"]}},"/user/update-account/{id}":{"patch":{"description":"Modifie un utilisateur existant en fonction de son UUID.","operationId":"UserController_updateUser","parameters":[{"name":"id","required":true,"in":"path","description":"UUID de l'utilisateur à mettre à jour","schema":{"type":"string"}}],"requestBody":{"required":true,"description":"Données nécessaires pour mettre à jour un utilisateur","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdateDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Mettre à jour un utilisateur","tags":["User"]}},"/user/me/update-account":{"patch":{"operationId":"UserController_updateCurrentUser","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdateDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Mettre à jour son propre compte","tags":["User"]}},"/user/me/reset-password":{"patch":{"operationId":"UserController_resetCurrentUserPassword","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResetPasswordDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Réinitialiser son propre mot de passe","tags":["User"]}},"/user/{id}/reset-password":{"patch":{"operationId":"UserController_resetPassword","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResetPasswordDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Réinitialiser le mot de passe (admin)","tags":["User"]}},"/user/me/delete-account":{"delete":{"description":"Supprime l'utilisateur courant via son token JWT. Action Irréversible","operationId":"UserController_deleteCurrentUser","parameters":[],"responses":{"204":{"description":"Utilisateur supprimé avec succès"}},"security":[{"bearer":[]}],"summary":"Supprime l'utilisateur courant","tags":["User"]}},"/role":{"get":{"operationId":"RoleController_getRoles","parameters":[{"name":"limit","required":false,"in":"query","schema":{"type":"number"}},{"name":"page","required":false,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"Liste des rôles paginée","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleListResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Récupérer la liste paginée des rôles","tags":["Role"]},"post":{"description":"Crée un rôle avec les données spécifiées dans le `RoleCreationDto`.","operationId":"RoleController_createRole","parameters":[],"requestBody":{"required":true,"description":"Données nécessaires à la création d’un nouveau rôle","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleCreationDto"}}}},"responses":{"201":{"description":"Rôle créé avec succès","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Créer un nouveau rôle","tags":["Role"]}},"/role/admin/all":{"get":{"description":"Renvoie la liste de tous les rôles disponibles dans le système, sans pagination.","operationId":"RoleController_getAllRoles","parameters":[],"responses":{"200":{"description":"Liste de tous les rôles","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RoleResponseDto"}}}}}},"security":[{"bearer":[]}],"summary":"Récupérer tous les rôles","tags":["Role"]}},"/role/{id}":{"get":{"description":"Renvoie les informations d’un rôle spécifique identifié par son UUID.","operationId":"RoleController_getRoleById","parameters":[{"name":"id","required":true,"in":"path","description":"UUID du rôle à récupérer","schema":{"type":"string"}}],"responses":{"200":{"description":"Détails du rôle","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Récupérer un rôle par son ID","tags":["Role"]},"patch":{"description":"Met à jour un rôle existant à partir de son UUID et des nouvelles données.","operationId":"RoleController_updateRole","parameters":[{"name":"id","required":true,"in":"path","description":"UUID du rôle à mettre à jour","schema":{"type":"string"}}],"requestBody":{"required":true,"description":"Données nécessaires pour mettre à jour un rôle existant","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleUpdateDto"}}}},"responses":{"200":{"description":"Rôle mis à jour avec succès","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Mettre à jour un rôle","tags":["Role"]},"delete":{"description":"Supprime un rôle spécifique selon son UUID. Action irréversible.","operationId":"RoleController_deleteRole","parameters":[{"name":"id","required":true,"in":"path","description":"UUID du rôle à supprimer","schema":{"type":"string"}}],"responses":{"204":{"description":"Rôle supprimé avec succès"}},"security":[{"bearer":[]}],"summary":"Supprimer un rôle","tags":["Role"]}},"/role/admin":{"post":{"description":"Crée un rôle administrateur/ou non avec les données spécifiées dans le `AdminRoleCreationDto`. Seuls les utilisateurs avec le rôle \"admin\" peuvent effectuer cette action.","operationId":"RoleController_createAdminRole","parameters":[],"requestBody":{"required":true,"description":"Données nécessaires à la création d’un rôle administrateur","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminRoleCreationDto"}}}},"responses":{"201":{"description":"Rôle administrateur/normal créé avec succès","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Créer un rôle administrateur","tags":["Role"]}},"/role/{id}/users":{"get":{"operationId":"RoleController_getUsersByRole","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserResponseDto"}}}}}},"security":[{"bearer":[]}],"summary":"Liste des utilisateurs d'un rôle","tags":["Role"]}},"/role/users/{userId}/role":{"patch":{"operationId":"RoleController_updateUserRole","parameters":[{"name":"userId","required":true,"in":"path","description":"UUID de l’utilisateur","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"properties":{"roleId":{"type":"string","format":"uuid","nullable":true}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Mettre à jour le rôle d'un utilisateur","tags":["Role"]}},"/setup/status":{"get":{"operationId":"SetupController_getSetupStatus","parameters":[],"responses":{"200":{"description":"Statut actuel de l'installation","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SetupStatusDto"}}}}},"summary":"Get application setup status","tags":["Setup"]}},"/setup/status/authenticated":{"get":{"operationId":"SetupController_getAuthenticatedSetupStatus","parameters":[],"responses":{"200":{"description":"Statut du setup pour l'utilisateur authentifié","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SetupStatusDto"}}}}},"security":[{"bearer":[]}],"summary":"Get setup status for authenticated user","tags":["Setup"]}},"/setup/vm-discovery/complete":{"post":{"description":"Appelé après que l'utilisateur ait scanné les VMs d'un serveur ESXi","operationId":"SetupController_completeVmDiscovery","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompleteVmDiscoveryDto"}}}},"responses":{"200":{"description":"Découverte des VMs terminée","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SetupStatusDto"}}}}},"security":[{"bearer":[]}],"summary":"Marquer la découverte des VMs comme complétée","tags":["Setup"]}},"/setup/step/complete":{"post":{"operationId":"SetupController_completeSetupStep","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompleteSetupStepDto"}}}},"responses":{"200":{"description":"Étape de setup complétée","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SetupProgressDto"}}}}},"security":[{"bearer":[]}],"summary":"Marquer une étape du setup comme complétée","tags":["Setup"]}},"/setup/progress":{"get":{"operationId":"SetupController_getSetupProgress","parameters":[],"responses":{"200":{"description":"Progression détaillée du setup","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SetupProgressDto"}}}}}},"security":[{"bearer":[]}],"summary":"Récupérer toute la progression du setup","tags":["Setup"]}},"/room":{"get":{"operationId":"RoomController_getRooms","parameters":[{"name":"includeCounts","required":false,"in":"query","schema":{"type":"boolean"}},{"name":"limit","required":false,"in":"query","schema":{"type":"number"}},{"name":"page","required":false,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoomListResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Lister les salles paginées","tags":["Room"]},"post":{"description":"Crée une salle dans le système à partir des données du `RoomCreationDto`.","operationId":"RoomController_createRoom","parameters":[],"requestBody":{"required":true,"description":"Données nécessaires à la création d’une nouvelle salle","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoomCreationDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoomResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Créer une nouvelle salle","tags":["Room"]}},"/room/all":{"get":{"operationId":"RoomController_getAllRooms","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RoomResponseDto"}}}}}},"security":[{"bearer":[]}],"summary":"Lister toutes les salles","tags":["Room"]}},"/room/{id}":{"get":{"description":"Retourne les informations d’une salle spécifique à partir de son UUID.","operationId":"RoomController_getRoomById","parameters":[{"name":"id","required":true,"in":"path","description":"UUID de la salle à récupérer","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoomResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Récupérer une salle par ID","tags":["Room"]},"patch":{"description":"Met à jour les informations d’une salle existante via son UUID.","operationId":"RoomController_updateRoom","parameters":[{"name":"id","required":true,"in":"path","description":"UUID de la salle à mettre à jour","schema":{"type":"string"}}],"requestBody":{"required":true,"description":"Données nécessaires à la mise à jour d’une salle existante","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoomCreationDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoomResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Mettre à jour une salle","tags":["Room"]},"delete":{"description":"Supprime une salle du système de manière permanente.","operationId":"RoomController_deleteRoom","parameters":[{"name":"id","required":true,"in":"path","description":"UUID de la salle à supprimer","schema":{"type":"string"}}],"responses":{"204":{"description":"Salle supprimée avec succès"}},"security":[{"bearer":[]}],"summary":"Supprimer une salle","tags":["Room"]}},"/server/admin/all":{"get":{"description":"Renvoie la liste de tous les serveurs enregistrés dans le système.","operationId":"ServerController_getAllServers","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ServerResponseDto"}}}}}},"security":[{"bearer":[]}],"summary":"Lister tous les serveurs","tags":["Server"]}},"/server/admin/{id}":{"get":{"description":"Renvoie les informations d’un serveur spécifique via son UUID.","operationId":"ServerController_getServerByIdAdmin","parameters":[{"name":"id","required":true,"in":"path","description":"UUID du serveur à récupérer","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServerResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Récupérer un serveur par ID","tags":["Server"]}},"/server":{"get":{"operationId":"ServerController_getMyServers","parameters":[{"name":"limit","required":false,"in":"query","schema":{"type":"number"}},{"name":"page","required":false,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServerListResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Lister mes serveurs accessibles avec pagination","tags":["Server"]},"post":{"description":"Crée un serveur avec les données spécifiées dans le `ServerCreationDto`.","operationId":"ServerController_createServer","parameters":[],"requestBody":{"required":true,"description":"Données nécessaires pour créer un nouveau serveur","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServerCreationDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServerResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Créer un nouveau serveur","tags":["Server"]}},"/server/{id}":{"get":{"operationId":"ServerController_getServerById","parameters":[{"name":"id","required":true,"in":"path","description":"UUID du serveur à récupérer","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServerResponseDto"}}}}},"security":[{"bearer":[]}],"tags":["Server"]},"patch":{"description":"Met à jour les informations d’un serveur existant via son UUID.","operationId":"ServerController_updateServer","parameters":[{"name":"id","required":true,"in":"path","description":"UUID du serveur à mettre à jour","schema":{"type":"string"}}],"requestBody":{"required":true,"description":"Données nécessaires pour mettre à jour un serveur","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServerUpdateDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServerResponseDto"}}}}},"security":[{"bearer":[]},{"bearer":[]}],"summary":"Mettre à jour un serveur","tags":["Server"]},"delete":{"description":"Supprime un serveur du système à partir de son UUID. Action irréversible.","operationId":"ServerController_deleteServer","parameters":[{"name":"id","required":true,"in":"path","description":"UUID du serveur à supprimer","schema":{"type":"string"}}],"responses":{"204":{"description":"Serveur supprimé avec succès"}},"security":[{"bearer":[]}],"summary":"Supprimer un serveur","tags":["Server"]}},"/ups":{"get":{"operationId":"UpsController_getUps","parameters":[{"name":"limit","required":false,"in":"query","schema":{"type":"number"}},{"name":"page","required":false,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpsListResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Lister les UPS paginés","tags":["UPS"]},"post":{"description":"Crée un nouvel UPS dans le système à partir des informations fournies.","operationId":"UpsController_createUps","parameters":[],"requestBody":{"required":true,"description":"Données nécessaires à la création d’un nouvel équipement UPS","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpsCreationDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpsResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Créer un nouvel équipement UPS","tags":["UPS"]}},"/ups/admin/all":{"get":{"operationId":"UpsController_getAllUps","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UpsResponseDto"}}}}}},"security":[{"bearer":[]}],"summary":"Lister tous les équipements UPS","tags":["UPS"]}},"/ups/{id}":{"get":{"description":"Renvoie les détails d’un équipement UPS à partir de son UUID.","operationId":"UpsController_getUpsById","parameters":[{"name":"id","required":true,"in":"path","description":"UUID de l’équipement UPS à récupérer","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpsResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Récupérer un équipement UPS par ID","tags":["UPS"]},"patch":{"description":"Met à jour les informations d’un UPS existant à partir de son UUID.","operationId":"UpsController_updateUps","parameters":[{"name":"id","required":true,"in":"path","description":"UUID de l’équipement UPS à mettre à jour","schema":{"type":"string"}}],"requestBody":{"required":true,"description":"Données à jour pour l’équipement UPS","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpsUpdateDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpsResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Mettre à jour un équipement UPS","tags":["UPS"]},"delete":{"description":"Supprime un UPS du système en utilisant son UUID. Action définitive.","operationId":"UpsController_deleteUps","parameters":[{"name":"id","required":true,"in":"path","description":"UUID de l’équipement UPS à supprimer","schema":{"type":"string"}}],"responses":{"204":{"description":"UPS supprimé avec succès"}},"security":[{"bearer":[]}],"summary":"Supprimer un équipement UPS","tags":["UPS"]}},"/group/server":{"get":{"operationId":"GroupServerController_getAllGroups","parameters":[{"name":"roomId","required":false,"in":"query","schema":{"type":"string"}},{"name":"priority","required":false,"in":"query","schema":{"type":"number"}},{"name":"limit","required":false,"in":"query","schema":{"type":"number"}},{"name":"page","required":false,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GroupServerListResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Récupérer tous les groupes de serveurs avec pagination","tags":["Group Server"]},"post":{"operationId":"GroupServerController_createGroup","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GroupServerDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GroupServerResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Créer un nouveau groupe serveur","tags":["Group Server"]}},"/group/server/{id}":{"get":{"operationId":"GroupServerController_getGroupById","parameters":[{"name":"id","required":true,"in":"path","schema":{"format":"uuid","type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GroupServerResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Récupérer un groupe serveur par ID","tags":["Group Server"]},"patch":{"operationId":"GroupServerController_updateGroup","parameters":[{"name":"id","required":true,"in":"path","schema":{"format":"uuid","type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GroupServerDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GroupServerResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Mettre à jour un groupe serveur","tags":["Group Server"]},"delete":{"operationId":"GroupServerController_deleteGroup","parameters":[{"name":"id","required":true,"in":"path","schema":{"format":"uuid","type":"string"}}],"responses":{"204":{"description":"Groupe supprimé avec succès"}},"security":[{"bearer":[]}],"summary":"Supprimer un groupe serveur","tags":["Group Server"]}},"/group/server/{id}/cascade":{"patch":{"operationId":"GroupServerController_toggleGroupCascade","parameters":[{"name":"id","required":true,"in":"path","schema":{"format":"uuid","type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ToggleCascadeDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GroupServerResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Activer/désactiver cascade sur un groupe serveur","tags":["Group Server"]}},"/group/vm":{"get":{"operationId":"GroupVmController_getAllGroups","parameters":[{"name":"limit","required":false,"in":"query","schema":{"type":"number"}},{"name":"page","required":false,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GroupVmListResponseDto"}}}}},"summary":"Récupérer tous les groupes VM avec pagination","tags":["Group VM"]},"post":{"operationId":"GroupVmController_createGroup","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GroupVmDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GroupVmDto"}}}}},"summary":"Créer un groupe VM","tags":["Group VM"]}},"/group/vm/{id}":{"get":{"operationId":"GroupVmController_getGroupById","parameters":[{"name":"id","required":true,"in":"path","schema":{"format":"uuid","type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GroupVmDto"}}}}},"summary":"Récupérer un groupe VM par ID","tags":["Group VM"]},"patch":{"operationId":"GroupVmController_updateGroup","parameters":[{"name":"id","required":true,"in":"path","schema":{"format":"uuid","type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GroupVmDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GroupVmDto"}}}}},"summary":"Mettre à jour un groupe VM","tags":["Group VM"]},"delete":{"operationId":"GroupVmController_deleteGroup","parameters":[{"name":"id","required":true,"in":"path","schema":{"format":"uuid","type":"string"}}],"responses":{"204":{"description":"Groupe supprimé avec succès"}},"summary":"Supprimer un groupe VM","tags":["Group VM"]}},"/group/shutdown/preview":{"post":{"description":"Returns the order in which VMs and servers would be shut down","operationId":"GroupShutdownController_preview","parameters":[{"name":"limit","required":false,"in":"query","schema":{"type":"number"}},{"name":"page","required":false,"in":"query","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ShutdownRequestDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ShutdownPreviewListResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Preview shutdown sequence for groups","tags":["Group Shutdown"]}},"/group/shutdown/execute":{"post":{"description":"Actually performs the shutdown of VMs and servers in the correct order","operationId":"GroupShutdownController_execute","parameters":[{"name":"limit","required":false,"in":"query","schema":{"type":"number"}},{"name":"page","required":false,"in":"query","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ShutdownRequestDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ShutdownPreviewListResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Execute shutdown sequence for groups","tags":["Group Shutdown"]}},"/presence/{userId}":{"get":{"operationId":"PresenceController_isUserOnline","parameters":[{"name":"userId","required":true,"in":"path","description":"UUID de l'utilisateur à vérifier","schema":{"example":"123e4567-e89b-12d3-a456-426614174000","type":"string"}}],"responses":{"200":{"description":"Statut de présence retourné"}},"summary":"Vérifie si un utilisateur est en ligne","tags":["Presence"]}},"/auth/login":{"post":{"description":"Permet à un utilisateur de se connecter avec son email et son mot de passe. Retourne un JWT.","operationId":"AuthController_login","parameters":[],"requestBody":{"required":true,"description":"Login DTO","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDto"}}}},"responses":{"200":{"description":"Connexion réussie","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponseDto"}}}}},"summary":"Connexion d’un utilisateur","tags":["Auth"]}},"/auth/register":{"post":{"description":"Crée un nouvel utilisateur...","operationId":"AuthController_register","parameters":[],"requestBody":{"required":true,"description":"Register DTO","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterDto"}}}},"responses":{"201":{"description":"Inscription réussie","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponseDto"}}}}},"summary":"Inscription d’un nouvel utilisateur","tags":["Auth"]}},"/auth/refresh":{"post":{"description":"Renvoie un nouvel access token à partir du refresh token (dans cookie httpOnly)","operationId":"AuthController_refresh","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponseDto"}}}}},"summary":"Renouveler le JWT","tags":["Auth"]}},"/auth/logout":{"post":{"operationId":"AuthController_logout","parameters":[],"responses":{"200":{"description":"Déconnexion réussie"}},"tags":["Auth"]}},"/auth/2fa/generate":{"post":{"description":"Génère un QR Code pour configurer la double authentification via une application type Google Authenticator.","operationId":"TwoFAController_generate","parameters":[],"responses":{"200":{"description":"QR Code généré."}},"security":[{"bearer":[]},{"bearer":[]}],"summary":"Générer un QR Code pour le 2FA","tags":["2FA"]}},"/auth/2fa/verify":{"post":{"description":"Vérifie le code fourni par l’utilisateur pour activer ou valider le 2FA.","operationId":"TwoFAController_verify","parameters":[],"requestBody":{"required":true,"description":"2FA verification DTO","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TwoFADto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TwoFAResponseDto"}}}},"401":{"description":"Échec de la vérification du code 2FA","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TwoFAResponseDto"}}}}},"security":[{"bearer":[]},{"bearer":[]}],"summary":"Vérifier un code 2FA","tags":["2FA"]}},"/auth/2fa/disable":{"post":{"description":"Désactive la double authentification pour l’utilisateur connecté après vérification.","operationId":"TwoFAController_disable","parameters":[],"responses":{"200":{"description":"2FA désactivé"}},"security":[{"bearer":[]},{"bearer":[]}],"summary":"Désactiver le 2FA","tags":["2FA"]}},"/auth/2fa/recovery":{"post":{"description":"Permet de se connecter si le téléphone 2FA est perdu, en utilisant un recovery code.","operationId":"TwoFAController_recover","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TwoFARecoveryDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TwoFAResponseDto"}}}}},"security":[{"bearer":[]},{"bearer":[]}],"summary":"Connexion via un code de récupération 2FA","tags":["2FA"]}},"/auth/2fa/status":{"get":{"operationId":"TwoFAController_get2FAStatus","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]},{"bearer":[]}],"tags":["2FA"]}},"/vm":{"get":{"operationId":"VmController_getVms","parameters":[{"name":"limit","required":false,"in":"query","schema":{"type":"number"}},{"name":"page","required":false,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VmListResponseDto"}}}}},"summary":"Lister les VMs paginées","tags":["VM"]},"post":{"description":"Crée une machine virtuelle sur un serveur spécifique. Nécessite la permission WRITE sur le serveur hôte.","operationId":"VmController_createVm","parameters":[],"requestBody":{"required":true,"description":"Données nécessaires à la création d'une VM","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VmCreationDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VmResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Créer une nouvelle VM","tags":["VM"]}},"/vm/all":{"get":{"operationId":"VmController_getAllVms","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/VmResponseDto"}}}}}},"summary":"Lister toutes les machines virtuelles","tags":["VM"]}},"/vm/{id}":{"get":{"description":"Retourne les informations détaillées d’une machine virtuelle en fonction de son identifiant.","operationId":"VmController_getVmById","parameters":[{"name":"id","required":true,"in":"path","description":"UUID ou identifiant unique de la VM à récupérer","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VmResponseDto"}}}}},"summary":"Récupérer une VM par ID","tags":["VM"]},"patch":{"description":"Met à jour les informations d’une machine virtuelle existante.","operationId":"VmController_updateVm","parameters":[{"name":"id","required":true,"in":"path","description":"UUID ou identifiant unique de la VM à modifier","schema":{"type":"string"}}],"requestBody":{"required":true,"description":"Données de mise à jour de la machine virtuelle","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VmUpdateDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VmResponseDto"}}}}},"summary":"Mettre à jour une VM","tags":["VM"]},"delete":{"description":"Supprime une machine virtuelle du système à partir de son identifiant. Action irréversible.","operationId":"VmController_deleteVm","parameters":[{"name":"id","required":true,"in":"path","description":"UUID ou identifiant unique de la VM à supprimer","schema":{"type":"string"}}],"responses":{"204":{"description":"VM supprimée avec succès"}},"summary":"Supprimer une VM","tags":["VM"]}},"/history":{"get":{"operationId":"HistoryController_getHistory","parameters":[{"name":"action","required":false,"in":"query","schema":{"type":"string"}},{"name":"entity","required":false,"in":"query","schema":{"type":"string"}},{"name":"userId","required":false,"in":"query","schema":{"type":"string"}},{"name":"from","required":false,"in":"query","schema":{"type":"string"}},{"name":"to","required":false,"in":"query","schema":{"type":"string"}},{"name":"limit","required":false,"in":"query","schema":{"type":"number"}},{"name":"page","required":false,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HistoryListResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Get paginated history events","tags":["History"]}},"/history/entity-types":{"get":{"operationId":"HistoryController_getEntityTypes","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EntityTypesResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Get available entity types for history","tags":["History"]}},"/dashboard/full":{"get":{"operationId":"DashboardController_getFullDashboard","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FullDashboardStatsDto"}}}}},"security":[{"bearer":[]}],"summary":"Get full dashboard statistics","tags":["Dashboard"]}},"/dashboard/history":{"get":{"operationId":"DashboardController_getHistory","parameters":[{"name":"entity","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"Statistiques de création par date","content":{"application/json":{"schema":{"type":"object"}}}}},"security":[{"bearer":[]}],"summary":"Get creation stats for an entity","tags":["Dashboard"]}},"/releases":{"get":{"operationId":"ReleasesController_getReleases","parameters":[{"name":"limit","required":false,"in":"query","schema":{"type":"number"}},{"name":"page","required":false,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"Liste paginée des versions frontend et backend","content":{"application/json":{"schema":{"type":"object"}}}}},"security":[{"bearer":[]}],"summary":"Get project releases","tags":["Releases"]}},"/health":{"get":{"description":"Returns detailed health status of all system components including database, Redis, memory, and external services","operationId":"HealthController_check","parameters":[],"responses":{"200":{"description":"Health check completed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthResponseDto"}}}},"503":{"description":"Service degraded or unhealthy","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthResponseDto"}}}}},"summary":"Comprehensive health check endpoint","tags":["Health"]}},"/health/simple":{"get":{"description":"Returns basic status for quick availability checks","operationId":"HealthController_simpleCheck","parameters":[],"responses":{"200":{"description":"Service operational"}},"summary":"Simple health check endpoint","tags":["Health"]}}},"info":{"title":"Infra Control API","description":"API de gestion d’infrastructure locale","version":"0.1","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"PermissionVmDto":{"type":"object","properties":{"vmId":{"type":"string"},"roleId":{"type":"string"},"bitmask":{"type":"number"}},"required":["vmId","roleId","bitmask"]},"PermissionServerDto":{"type":"object","properties":{"roleId":{"type":"string"},"serverId":{"type":"string"},"bitmask":{"type":"number"}},"required":["roleId","serverId","bitmask"]},"RoleResponseDto":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"permissionServers":{"type":"array","items":{"$ref":"#/components/schemas/PermissionServerDto"}},"permissionVms":{"type":"array","items":{"$ref":"#/components/schemas/PermissionVmDto"}},"canCreateServer":{"type":"boolean"},"isAdmin":{"type":"boolean"}},"required":["id","name","permissionServers","permissionVms","canCreateServer","isAdmin"]},"UserResponseDto":{"type":"object","properties":{"id":{"type":"string"},"username":{"type":"string"},"firstName":{"type":"string"},"lastName":{"type":"string"},"email":{"type":"string"},"active":{"type":"boolean"},"isTwoFactorEnabled":{"type":"boolean"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"},"roles":{"type":"array","items":{"$ref":"#/components/schemas/RoleResponseDto"}}},"required":["id","username","firstName","lastName","email","active","isTwoFactorEnabled","createdAt","updatedAt","roles"]},"UserListResponseDto":{"type":"object","properties":{"items":{"type":"array","items":{"$ref":"#/components/schemas/UserResponseDto"}},"totalItems":{"type":"number"},"totalPages":{"type":"number"},"currentPage":{"type":"number"}},"required":["items","totalItems","totalPages","currentPage"]},"UserUpdateDto":{"type":"object","properties":{"username":{"type":"string"},"firstName":{"type":"string"},"lastName":{"type":"string"},"email":{"type":"string"}},"required":["username","firstName","lastName","email"]},"ResetPasswordDto":{"type":"object","properties":{"newPassword":{"type":"string"}},"required":["newPassword"]},"RoleListResponseDto":{"type":"object","properties":{"items":{"type":"array","items":{"$ref":"#/components/schemas/RoleResponseDto"}},"totalItems":{"type":"number"},"totalPages":{"type":"number"},"currentPage":{"type":"number"}},"required":["items","totalItems","totalPages","currentPage"]},"RoleCreationDto":{"type":"object","properties":{"name":{"type":"string"}},"required":["name"]},"AdminRoleCreationDto":{"type":"object","properties":{"name":{"type":"string"}},"required":["name"]},"RoleUpdateDto":{"type":"object","properties":{"name":{"type":"string"},"isAdmin":{"type":"boolean"}},"required":["name","isAdmin"]},"SetupStatusDto":{"type":"object","properties":{"isFirstSetup":{"type":"boolean","description":"Indique si c'est la première configuration de l'application","example":true},"hasAdminUser":{"type":"boolean","description":"Indique si au moins un utilisateur admin existe","example":false},"hasRooms":{"type":"boolean","description":"Indique si au moins une salle a été créée","example":false},"hasUps":{"type":"boolean","description":"Indique si au moins un onduleur a été configuré","example":false},"hasServers":{"type":"boolean","description":"Indique si au moins un serveur a été ajouté","example":false},"currentStep":{"type":"string","description":"Étape actuelle du processus de configuration","enum":["welcome","create-room","create-ups","create-server","vm-discovery","complete"],"example":"create-room"},"isCurrentUserAdmin":{"type":"boolean","description":"Indique si l'utilisateur actuel est admin (seulement pour l'endpoint authentifié)","example":true},"hasSearchedForVms":{"type":"boolean","description":"Indique si la découverte des VMs a été effectuée","example":true},"totalSteps":{"type":"number","description":"Nombre total d'étapes dans le setup","example":5},"currentStepIndex":{"type":"number","description":"Index de l'étape actuelle (0-based)","example":1}},"required":["isFirstSetup","hasAdminUser","hasRooms","hasUps","hasServers","currentStep"]},"CompleteVmDiscoveryDto":{"type":"object","properties":{"serverId":{"type":"string","description":"ID du serveur scanné"},"vmCount":{"type":"number","description":"Nombre de VMs découvertes"},"vmIds":{"description":"Liste des IDs des VMs découvertes","type":"array","items":{"type":"string"}}},"required":["serverId","vmCount"]},"CompleteSetupStepDto":{"type":"object","properties":{"step":{"type":"string","enum":["welcome","create-room","create-ups","create-server","vm-discovery","complete"]},"metadata":{"type":"object"}},"required":["step"]},"SetupProgressDto":{"type":"object","properties":{"id":{"type":"string","description":"Identifiant unique de la progression de la configuration","example":"123e4567-e89b-12d3-a456-426614174000"},"step":{"type":"string","description":"Étape du processus de configuration","example":"initialization","enum":["welcome","create-room","create-ups","create-server","vm-discovery","complete"]},"completedAt":{"type":"string","description":"Date et heure de la dernière mise à jour de l'étape","example":"2025-10-01T12:00:00Z"},"completedBy":{"type":"string","description":"ID de l'utilisateur qui a effectué la dernière mise à jour","example":"123e4567-e89b-12d3-a456-426614174000"},"metadata":{"type":"object","description":"Métadonnées supplémentaires liées à l'étape de configuration","example":{"notes":"Initial setup completed"}}},"required":["id","step","completedAt","completedBy"]},"IloResponseDto":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"ip":{"type":"string"}},"required":["id","name","ip"]},"ServerResponseDto":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"state":{"type":"string"},"grace_period_on":{"type":"number"},"grace_period_off":{"type":"number"},"ip":{"type":"string"},"type":{"type":"string"},"priority":{"type":"number"},"groupId":{"type":"string"},"roomId":{"type":"string"},"upsId":{"type":"string"},"ilo":{"$ref":"#/components/schemas/IloResponseDto"}},"required":["id","name","state","grace_period_on","grace_period_off","ip","type","priority","groupId","roomId","upsId"]},"UpsResponseDto":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"ip":{"type":"string"},"grace_period_on":{"type":"number"},"grace_period_off":{"type":"number"},"roomId":{"type":"string"},"serverCount":{"type":"number","description":"Number of servers connected to this UPS"}},"required":["id","name","ip","grace_period_on","grace_period_off","roomId","serverCount"]},"RoomResponseDto":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"servers":{"type":"array","items":{"$ref":"#/components/schemas/ServerResponseDto"}},"ups":{"type":"array","items":{"$ref":"#/components/schemas/UpsResponseDto"}},"serverCount":{"type":"number"},"upsCount":{"type":"number"}},"required":["id","name"]},"RoomListResponseDto":{"type":"object","properties":{"items":{"type":"array","items":{"$ref":"#/components/schemas/RoomResponseDto"}},"totalItems":{"type":"number"},"totalPages":{"type":"number"},"currentPage":{"type":"number"}},"required":["items","totalItems","totalPages","currentPage"]},"RoomCreationDto":{"type":"object","properties":{"name":{"type":"string","description":"Nom de la salle","example":"My Room"}},"required":["name"]},"ServerListResponseDto":{"type":"object","properties":{"items":{"type":"array","items":{"$ref":"#/components/schemas/ServerResponseDto"}},"totalItems":{"type":"number"},"totalPages":{"type":"number"},"currentPage":{"type":"number"}},"required":["items","totalItems","totalPages","currentPage"]},"IloCreationDto":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"ip":{"type":"string"},"login":{"type":"string"},"password":{"type":"string"}},"required":["name","ip","login","password"]},"ServerCreationDto":{"type":"object","properties":{"name":{"type":"string","description":"Nom du serveur","example":"My Server"},"state":{"type":"string","description":"État actuel du serveur","example":"active"},"grace_period_on":{"type":"number","description":"Durée de la période de grâce lorsque le serveur est allumé (en secondes)","example":10},"grace_period_off":{"type":"number","description":"Durée de la période de grâce lorsque le serveur est éteint (en secondes)","example":10},"adminUrl":{"type":"string","description":"URL d’administration du serveur","example":"https://admin.example.com"},"ip":{"type":"string","description":"Adresse IP du serveur","example":"192.168.1.10"},"login":{"type":"string","description":"Identifiant de connexion administrateur","example":"admin"},"password":{"type":"string","description":"Mot de passe associé au compte administrateur","example":"supersecretpassword"},"type":{"type":"string","description":"Type de serveur (ex: physical, virtual, cloud, etc.)","example":"physical"},"priority":{"type":"number","description":"Priorité du serveur dans son groupe ou rack (plus c’est bas, plus la priorité est haute)","example":1},"roomId":{"type":"string","description":"UUID de la salle où le serveur est localisé","example":"3f6f5a9a-b0b3-4c6e-ae92-1f3c3b5e7d17"},"groupId":{"type":"string","description":"UUID optionnel du groupe auquel le serveur est rattaché","example":"7a2b9f0f-9b8d-42d5-b1f5-3cbde8b43ac2"},"upsId":{"type":"string","description":"UUID optionnel de l’UPS (alimentation sans interruption) liée au serveur","example":"1bb27f71-3c5c-4d3e-8b2f-28cdb1a0d2e2"},"ilo":{"description":"Données d’initialisation de l’Ilo associée au serveur","allOf":[{"$ref":"#/components/schemas/IloCreationDto"}]}},"required":["name","state","grace_period_on","grace_period_off","adminUrl","ip","login","password","type","priority","roomId"]},"IloUpdateDto":{"type":"object","properties":{"name":{"type":"string"},"ip":{"type":"string"},"login":{"type":"string"},"password":{"type":"string"}},"required":["name","ip","login","password"]},"ServerUpdateDto":{"type":"object","properties":{"name":{"type":"string"},"state":{"type":"string"},"grace_period_on":{"type":"number"},"grace_period_off":{"type":"number"},"adminUrl":{"type":"string"},"ip":{"type":"string"},"login":{"type":"string"},"password":{"type":"string"},"type":{"type":"string"},"priority":{"type":"number"},"groupId":{"type":"string"},"roomId":{"type":"string"},"upsId":{"type":"string"},"ilo":{"$ref":"#/components/schemas/IloUpdateDto"}},"required":["name","state","grace_period_on","grace_period_off","adminUrl","ip","login","password","type","priority","groupId","roomId","upsId","ilo"]},"UpsListResponseDto":{"type":"object","properties":{"items":{"type":"array","items":{"$ref":"#/components/schemas/UpsResponseDto"}},"totalItems":{"type":"number"},"totalPages":{"type":"number"},"currentPage":{"type":"number"}},"required":["items","totalItems","totalPages","currentPage"]},"UpsCreationDto":{"type":"object","properties":{"name":{"type":"string"},"ip":{"type":"string"},"login":{"type":"string"},"password":{"type":"string"},"grace_period_on":{"type":"number"},"grace_period_off":{"type":"number"},"roomId":{"type":"string"}},"required":["name","ip","login","password","grace_period_on","grace_period_off","roomId"]},"UpsUpdateDto":{"type":"object","properties":{"name":{"type":"string"},"ip":{"type":"string"},"login":{"type":"string"},"password":{"type":"string"},"grace_period_on":{"type":"number"},"grace_period_off":{"type":"number"},"roomId":{"type":"string"}},"required":["name","ip","login","password","grace_period_on","grace_period_off","roomId"]},"GroupServerResponseDto":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"priority":{"type":"number","minimum":1,"maximum":4},"description":{"type":"string"},"cascade":{"type":"boolean"},"roomId":{"type":"string"},"serverIds":{"type":"array","items":{"type":"string"}},"vmGroupIds":{"type":"array","items":{"type":"string"}}},"required":["id","name","priority","cascade","serverIds","vmGroupIds"]},"GroupServerListResponseDto":{"type":"object","properties":{"items":{"type":"array","items":{"$ref":"#/components/schemas/GroupServerResponseDto"}},"totalItems":{"type":"number"},"totalPages":{"type":"number"},"currentPage":{"type":"number"}},"required":["items","totalItems","totalPages","currentPage"]},"GroupServerDto":{"type":"object","properties":{"name":{"type":"string"},"priority":{"type":"number","minimum":1,"maximum":4},"description":{"type":"string"},"cascade":{"type":"boolean","default":true},"roomId":{"type":"string"},"serverIds":{"type":"array","items":{"type":"string"}}},"required":["name","priority","cascade"]},"ToggleCascadeDto":{"type":"object","properties":{"cascade":{"type":"boolean"}},"required":["cascade"]},"GroupVmResponseDto":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"priority":{"type":"number","minimum":1,"maximum":4},"description":{"type":"string"},"cascade":{"type":"boolean"},"roomId":{"type":"string"},"serverGroupId":{"type":"string"},"vmIds":{"type":"array","items":{"type":"string"}}},"required":["id","name","priority","cascade","serverGroupId","vmIds"]},"GroupVmListResponseDto":{"type":"object","properties":{"items":{"type":"array","items":{"$ref":"#/components/schemas/GroupVmResponseDto"}},"totalItems":{"type":"number"},"totalPages":{"type":"number"},"currentPage":{"type":"number"}},"required":["items","totalItems","totalPages","currentPage"]},"GroupVmDto":{"type":"object","properties":{"name":{"type":"string"},"priority":{"type":"number","minimum":1,"maximum":4},"description":{"type":"string"},"cascade":{"type":"boolean","default":true},"roomId":{"type":"string"},"serverGroupId":{"type":"string"},"vmIds":{"type":"array","items":{"type":"string"}}},"required":["name","priority","cascade","serverGroupId"]},"ShutdownRequestDto":{"type":"object","properties":{"groupIds":{"description":"Array of group IDs (server or VM groups) to shutdown","type":"array","items":{"type":"string"}}},"required":["groupIds"]},"ShutdownStep":{"type":"object","properties":{"order":{"type":"number"},"type":{"type":"string","enum":["vm","server"]},"entityId":{"type":"string"},"entityName":{"type":"string"},"groupId":{"type":"string"},"groupName":{"type":"string"},"priority":{"type":"number"}},"required":["order","type","entityId","entityName","groupId","groupName","priority"]},"ShutdownPreviewListResponseDto":{"type":"object","properties":{"items":{"type":"array","items":{"$ref":"#/components/schemas/ShutdownStep"}},"totalItems":{"type":"number"},"totalPages":{"type":"number"},"currentPage":{"type":"number"},"totalVms":{"type":"number"},"totalServers":{"type":"number"}},"required":["items","totalItems","totalPages","currentPage","totalVms","totalServers"]},"LoginDto":{"type":"object","properties":{"identifier":{"type":"string","description":"Username or email of the user","example":"john_doe OR john@example.com"},"password":{"type":"string","description":"Password of the user","example":"Password123?"}},"required":["identifier","password"]},"LoginResponseDto":{"type":"object","properties":{}},"RegisterDto":{"type":"object","properties":{"firstName":{"type":"string","description":"First name of the user","example":"John"},"lastName":{"type":"string","description":"Last name of the user","example":"Doe"},"email":{"type":"string","description":"Email of the user","example":"john.doe@example.com"},"username":{"type":"string","description":"Username of the user","example":"john_doe"},"password":{"type":"string","description":"Password of the user","example":"Password123?"}},"required":["firstName","lastName","email","username","password"]},"TwoFADto":{"type":"object","properties":{"code":{"type":"string","description":"Code to verify 2FA","example":"123456"}},"required":["code"]},"TwoFAResponseDto":{"type":"object","properties":{"isValid":{"type":"boolean","description":"Status of the verification","example":true},"accessToken":{"type":"string","description":"Access token for the user","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."},"message":{"type":"string","description":"Message indicating the status of the verification","example":"2FA is valid."},"recoveryCodes":{"description":"List of recovery codes for first-time activation","example":["RAKX-1EGR","VX84-ZK8G","..."],"type":"array","items":{"type":"string"}}},"required":["isValid"]},"TwoFARecoveryDto":{"type":"object","properties":{"recoveryCode":{"type":"string","description":"Un des recovery codes 2FA fournis à l’activation","example":"VJC7-SKSP"}},"required":["recoveryCode"]},"VmResponseDto":{"type":"object","properties":{"name":{"type":"string"},"state":{"type":"string"},"grace_period_on":{"type":"number"},"grace_period_off":{"type":"number"},"os":{"type":"string"},"adminUrl":{"type":"string"},"ip":{"type":"string"},"priority":{"type":"number"},"groupId":{"type":"string"},"serverId":{"type":"string"}},"required":["name","state","grace_period_on","grace_period_off","os","adminUrl","ip","priority","groupId","serverId"]},"VmListResponseDto":{"type":"object","properties":{"items":{"type":"array","items":{"$ref":"#/components/schemas/VmResponseDto"}},"totalItems":{"type":"number"},"totalPages":{"type":"number"},"currentPage":{"type":"number"}},"required":["items","totalItems","totalPages","currentPage"]},"VmCreationDto":{"type":"object","properties":{"name":{"type":"string"},"state":{"type":"string"},"grace_period_on":{"type":"number"},"grace_period_off":{"type":"number"},"os":{"type":"string"},"adminUrl":{"type":"string"},"ip":{"type":"string"},"login":{"type":"string"},"password":{"type":"string"},"priority":{"type":"number"},"serverId":{"type":"string"},"groupId":{"type":"string"}},"required":["name","state","grace_period_on","grace_period_off","os","adminUrl","ip","login","password","priority","serverId","groupId"]},"VmUpdateDto":{"type":"object","properties":{"name":{"type":"string"},"state":{"type":"string"},"grace_period_on":{"type":"number"},"grace_period_off":{"type":"number"},"os":{"type":"string"},"adminUrl":{"type":"string"},"ip":{"type":"string"},"login":{"type":"string"},"password":{"type":"string"},"priority":{"type":"number"},"serverId":{"type":"string"},"groupId":{"type":"string"}},"required":["name","state","grace_period_on","grace_period_off","os","adminUrl","ip","login","password","priority","serverId","groupId"]},"HistoryListResponseDto":{"type":"object","properties":{"items":{"type":"array","items":{"type":"array"}},"totalItems":{"type":"number"},"totalPages":{"type":"number"},"currentPage":{"type":"number"}},"required":["items","totalItems","totalPages","currentPage"]},"EntityTypesResponseDto":{"type":"object","properties":{"entityTypes":{"description":"List of distinct entity types found in history records","example":["Server","VM","User","Group"],"items":{"type":"array"},"type":"array"}},"required":["entityTypes"]},"FullDashboardStatsDto":{"type":"object","properties":{"totalUsers":{"type":"number","example":100},"adminUsers":{"type":"number","example":5},"totalRooms":{"type":"number","example":10},"totalUps":{"type":"number","example":8},"totalServers":{"type":"number","example":20},"totalVms":{"type":"number","example":50},"serversUp":{"type":"number","example":18},"serversDown":{"type":"number","example":2},"vmsUp":{"type":"number","example":45},"vmsDown":{"type":"number","example":5},"setupComplete":{"type":"boolean","example":true},"setupProgress":{"type":"number","example":80},"onlineUsers":{"type":"number","example":12}},"required":["totalUsers","adminUsers","totalRooms","totalUps","totalServers","totalVms","serversUp","serversDown","vmsUp","vmsDown","setupComplete","setupProgress","onlineUsers"]},"HealthCheckDto":{"type":"object","properties":{"name":{"type":"string","description":"Name of the health check","example":"database"},"status":{"type":"string","description":"Status of the health check","enum":["up","down","unknown"],"example":"up"},"message":{"type":"string","description":"Human readable message","example":"Database connection is healthy"},"responseTime":{"type":"number","description":"Response time in milliseconds","example":25},"details":{"type":"object","description":"Additional details about the health check","additionalProperties":true}},"required":["name","status","details"]},"HealthResponseDto":{"type":"object","properties":{"status":{"type":"string","description":"Overall health status","enum":["up","down","degraded"],"example":"up"},"timestamp":{"type":"string","description":"Timestamp of the health check","example":"2024-07-03T10:30:00.000Z"},"totalResponseTime":{"type":"number","description":"Total response time for all checks","example":150},"checks":{"description":"Individual health check results","type":"array","items":{"$ref":"#/components/schemas/HealthCheckDto"}},"summary":{"type":"object","description":"Summary of health check results","additionalProperties":true}},"required":["status","timestamp","totalResponseTime","checks","summary"]}}}}